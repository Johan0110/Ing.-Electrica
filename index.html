<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular – Ingeniería Eléctrica UNAL</title>

<style>
:root{
 --fund:#e6dcfa;
 --disc:#d8f3ee;
 --libre:#fff1cc;
 --bg:#f5f6fa;
 --card:#ffffff;
 --text:#1f2937;
}

*{ box-sizing:border-box; }

body{
 margin:0;
 font-family:'Segoe UI',system-ui,sans-serif;
 background:var(--bg);
 color:var(--text);
}

h1{
 text-align:center;
 margin:20px 0;
}

.dashboard{
 max-width:1300px;
 margin:auto;
 padding:15px;
}

.summary{
 display:grid;
 grid-template-columns:2fr 1fr;
 gap:16px;
}

.box{
 background:var(--card);
 border-radius:18px;
 padding:18px;
 box-shadow:0 6px 18px rgba(0,0,0,.08);
}

.big-counter{
 font-size:34px;
 font-weight:700;
}

.big-counter span{
 font-size:14px;
 color:#6b7280;
}

.progress-group{ margin-top:12px; }

.bar{
 height:10px;
 background:#e5e7eb;
 border-radius:10px;
 overflow:hidden;
 margin-top:6px;
}

.bar span{
 display:block;
 height:100%;
}

.legend{
 display:flex;
 gap:10px;
 flex-wrap:wrap;
}

.legend div{
 padding:6px 14px;
 border-radius:20px;
 font-size:12px;
}

button{
 border:none;
 padding:10px 18px;
 border-radius:14px;
 background:#ef4444;
 color:white;
 cursor:pointer;
}

.grid{
 max-width:1300px;
 margin:20px auto;
 padding:15px;
 display:grid;
 grid-template-columns:repeat(10, 1fr);
 gap:14px;
}

.semester{
 background:var(--card);
 border-radius:20px;
 padding:10px;
 box-shadow:0 6px 18px rgba(0,0,0,.05);
}

.semester h3{
 text-align:center;
 font-size:13px;
 margin-bottom:10px;
}

.course{
 height:78px;
 border-radius:16px;
 padding:8px;
 margin-bottom:8px;
 font-size:12px;
 cursor:pointer;
 display:flex;
 flex-direction:column;
 justify-content:center;
 transition:.2s;
 position:relative;
 text-align:center;
}

.course:hover{ transform:translateY(-2px); }

.course.approved{
 text-decoration:line-through;
 opacity:.7;
}

.course.locked{
 cursor:not-allowed;
}

.course.locked::after{
 content:attr(data-tip);
 position:absolute;
 inset:0;
 background:rgba(255,255,255,.88);
 display:flex;
 align-items:center;
 justify-content:center;
 border-radius:16px;
 font-size:11px;
 font-weight:600;
 padding:6px;
}

.fund{ background:var(--fund); }
.disc{ background:var(--disc); }
.libre{ background:var(--libre); }

.footer{
 text-align:center;
 font-size:12px;
 color:#777;
 margin:20px;
}
</style>
</head>

<body>

<h1>Malla Curricular – Ingeniería Eléctrica (UNAL)</h1>

<div class="dashboard">
 <div class="summary">
  <div class="box" id="stats"></div>

  <div class="box">
   <div class="legend">
    <div style="background:var(--fund)">Fundamentación</div>
    <div style="background:var(--disc)">Disciplinar</div>
    <div style="background:var(--libre)">Libre Elección</div>
   </div>
   <br>
   <button onclick="resetAll()">Restablecer progreso</button>
  </div>
 </div>
</div>

<div class="grid" id="grid"></div>

<div class="footer">Clic para aprobar · Guardado automático</div>

<script>
const data=[
 {sem:1,id:'CALC_DIF',n:'Cálculo Diferencial',c:4,t:'fund'},
 {sem:1,id:'GEO_VEC',n:'Geometría Vectorial',c:4,t:'fund'},
 {sem:1,id:'INTRO_IE',n:'Introducción a la Ing. Eléctrica',c:2,t:'disc'},
 {sem:1,id:'LE1',n:'Libre Elección',c:3,t:'libre'},
 {sem:1,id:'LE2',n:'Libre Elección',c:3,t:'libre'},

 {sem:2,id:'CALC_INT',n:'Cálculo Integral',c:4,t:'fund',req:['CALC_DIF']},
 {sem:2,id:'ALG_LIN',n:'Álgebra Lineal',c:4,t:'fund',req:['GEO_VEC']},
 {sem:2,id:'FIS_MEC',n:'Física Mecánica',c:4,t:'fund',req:['CALC_DIF']},
 {sem:2,id:'CIRC_I',n:'Análisis de Circuitos I',c:3,t:'disc',req:['CALC_DIF']},
 {sem:2,id:'LE3',n:'Libre Elección',c:3,t:'libre'},

 {sem:3,id:'CALC_VAR',n:'Cálculo Multivariable',c:4,t:'fund',req:['CALC_INT']},
 {sem:3,id:'EDO',n:'Ecuaciones Diferenciales',c:4,t:'fund',req:['CALC_INT','ALG_LIN']},
 {sem:3,id:'EM',n:'Electricidad y Magnetismo',c:4,t:'fund',req:['FIS_MEC','CALC_INT']},
 {sem:3,id:'PROG',n:'Fundamentos de Programación',c:3,t:'fund'},
 {sem:3,id:'LE4',n:'Libre Elección',c:3,t:'libre'},

 {sem:4,id:'EST',n:'Estadística I',c:3,t:'fund',req:['CALC_INT']},
 {sem:4,id:'MAT_ESP',n:'Matemáticas Especiales',c:4,t:'fund',req:['EDO']},
 {sem:4,id:'MET_NUM',n:'Métodos Numéricos',c:4,t:'fund',req:['CALC_VAR']},
 {sem:4,id:'CIRC_II',n:'Circuitos Eléctricos II',c:3,t:'disc',req:['CIRC_I','EDO']},
 {sem:4,id:'LAB_CIRC',n:'Laboratorio de Circuitos',c:1,t:'disc'},

 {sem:5,id:'OPT_FUND',n:'Optativa de Fundamentación',c:3,t:'fund'},
 {sem:5,id:'SEN_SIS',n:'Señales y Sistemas',c:3,t:'disc'},
 {sem:5,id:'TEO_EM',n:'Teoría Electromagnética',c:3,t:'disc',req:['EM']},
 {sem:5,id:'ELEC_I',n:'Electrónica Análoga I',c:3,t:'disc',req:['CIRC_II']},
 {sem:5,id:'LE5',n:'Libre Elección',c:3,t:'libre'},
 {sem:5,id:'LE6',n:'Libre Elección',c:3,t:'libre'},

 {sem:6,id:'LINEAS',n:'Líneas de Transmisión',c:3,t:'disc',req:['TEO_EM']},
 {sem:6,id:'CONTROL',n:'Control Entrada-Salida',c:3,t:'disc',req:['SEN_SIS']},
 {sem:6,id:'MAQ_I',n:'Máquinas Eléctricas I',c:3,t:'disc',req:['TEO_EM']},
 {sem:6,id:'ELEC_II',n:'Electrónica Análoga II',c:3,t:'disc',req:['ELEC_I']},
 {sem:6,id:'DIGITAL',n:'Electrónica Digital',c:3,t:'disc',req:['ELEC_I']},

 {sem:7,id:'OPT_DISC_1',n:'Optativa Disciplinar',c:3,t:'disc'},
 {sem:7,id:'INST',n:'Instalaciones Eléctricas',c:3,t:'disc',req:['MAQ_I','LINEAS']},
 {sem:7,id:'MAQ_II',n:'Máquinas Eléctricas II',c:3,t:'disc',req:['MAQ_I']},
 {sem:7,id:'TELECOM',n:'Telecomunicaciones',c:3,t:'disc',req:['DIGITAL']},
 {sem:7,id:'OPT_DISC_2',n:'Optativa Disciplinar',c:3,t:'disc'},

 {sem:8,id:'LAB_MAQ',n:'Laboratorio de Máquinas',c:2,t:'disc'},
 {sem:8,id:'GEN',n:'Generación de Energía',c:3,t:'disc',req:['MAQ_II']},
 {sem:8,id:'POT',n:'Sistemas de Potencia',c:3,t:'disc',req:['MAQ_II','LINEAS']},
 {sem:8,id:'AUTO',n:'Automatización Eléctrica',c:3,t:'disc',req:['DIGITAL']},
 {sem:8,id:'LE7',n:'Libre Elección',c:3,t:'libre'},

 {sem:9,id:'OPT_DISC_3',n:'Optativa Disciplinar',c:3,t:'disc'},
 {sem:9,id:'REDES',n:'Redes Eléctricas',c:3,t:'disc',req:['POT']},
 {sem:9,id:'PROT',n:'Protecciones Eléctricas',c:3,t:'disc',req:['POT']},
 {sem:9,id:'LE8',n:'Libre Elección',c:3,t:'libre'},

 {sem:10,id:'TG',n:'Trabajo de Grado',c:6,t:'disc'},
 {sem:10,id:'LE9',n:'Libre Elección',c:3,t:'libre'},
 {sem:10,id:'LE10',n:'Libre Elección',c:3,t:'libre'},
 {sem:10,id:'LE11',n:'Libre Elección',c:4,t:'libre'}
];

let done = JSON.parse(localStorage.getItem('ie_done')||'[]');

function calc(t){
 const total=data.filter(x=>x.t===t).reduce((s,x)=>s+x.c,0);
 const d=data.filter(x=>x.t===t&&done.includes(x.id)).reduce((s,x)=>s+x.c,0);
 return {d,total,p:Math.round(d/total*100)||0};
}

function render(){
 const grid=document.getElementById('grid');
 const stats=document.getElementById('stats');
 grid.innerHTML='';

 const f=calc('fund'), d=calc('disc'), l=calc('libre');
 const totalDone=f.d+d.d+l.d;
 const totalAll=data.reduce((s,x)=>s+x.c,0);

 stats.innerHTML=`
 <div class="big-counter">${totalDone} <span>/ ${totalAll} créditos</span></div>
 <div class="progress-group">Fundamentación ${f.p}%
  <div class="bar"><span style="width:${f.p}%;background:#9b87d4"></span></div>
 </div>
 <div class="progress-group">Disciplinar ${d.p}%
  <div class="bar"><span style="width:${d.p}%;background:#55c9b2"></span></div>
 </div>
 <div class="progress-group">Libre Elección ${l.p}%
  <div class="bar"><span style="width:${l.p}%;background:#f2c14e"></span></div>
 </div>`;

 for(let s=1;s<=10;s++){
  const col=document.createElement('div');
  col.className='semester';
  col.innerHTML=`<h3>Semestre ${s}</h3>`;

  data.filter(x=>x.sem===s).forEach(c=>{
   const locked=c.req && !c.req.every(r=>done.includes(r));
   const div=document.createElement('div');
   div.className=`course ${c.t} ${done.includes(c.id)?'approved':''} ${locked?'locked':''}`;
   div.dataset.tip=locked?'Faltan prerrequisitos':'';
   div.innerHTML=`<b>${c.n}</b><small>${c.c} créditos</small>`;
   div.onclick=()=>{
    if(locked) return;
    done.includes(c.id)?done=done.filter(x=>x!==c.id):done.push(c.id);
    localStorage.setItem('ie_done',JSON.stringify(done));
    render();
   };
   col.appendChild(div);
  });

  grid.appendChild(col);
 }
}

function resetAll(){
 done=[];
 localStorage.removeItem('ie_done');
 render();
}

render();
</script>

</body>
</html>

